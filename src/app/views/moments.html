<div class="moment-banner">
  <h1 class="ng-cloak" ng-show="{{vm.user.name !== null}}">{{vm.user.name}}, here are your moments!</h1>
  <h1 class="ng-cloak" ng-hide="{{vm.user.name !== null}}">Hello, here are your moments!</h1>
  <img ng-show="{{vm.user.profile_image}}" class="ng-cloak image-profile" src="../../images/defaultUser.jpg" alt="Image of {{ vm.user.name }}" title="{{ vm.username }}">
  <img ng-hide="{{vm.user.profile_image}}" class="ng-cloak image-profile" ng-src="{{ vm.user.profile_image.url }}" alt="Image of {{ vm.user.name }}" title="{{ vm.username }}">
  <ul class="user-stats">
    <li><span ng-bind="vm.momentCount"></span>moments</li>
    <li><span ng-bind="vm.tagCount"></span>tags</li>
  </ul>
</div>
<section class="timeline">
  <a class="btn-large" href="#/moments/new">Create a moment</a>
  <div class="timeline-header">
    <h2>Timeline</h2>
    <input class="search-light" type="text" name="search" placeholder="SEARCH" ng-model="searchMoments">
  </div>
	<div class="moments-list-wrapper">
		<section class="moments-list" ng-repeat="month in vm.months">
			<h3>{{ month[0].dateModified | date: 'MMMM yyyy' }}</h3>
			<ul>
				<li class="moments-list-detail" ng-repeat="moment in month | orderBy: 'dateModified':true | filter: searchMoments">
					<a href="#/moments/{{moment._id}}">
						<p ng-bind-html="moment.content | limitTo: 175 | markdown"></p>
						<figure>
								<img ng-src="{{ moment.album_art }}" alt="Album cover for {{ moment.album_art }}" title="{{ moment.album_art }}">
								<figcaption>{{ moment.dateModified | date: 'dd'}}</figcaption>
						</figure>
					</a>
				</li>
			</ul>
		</section>
	</div>
</section>
